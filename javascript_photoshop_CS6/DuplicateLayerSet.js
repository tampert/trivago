/** * Created by Dirk Soentjens on 19/03/15. * Duplicate the default layer set and set the text layers to the right language */var translations_xml = [],        text_hotel_search = "",        text_room_type = "",        text_room = "",        text_departure = "",        text_arrival = "",        text_city = "",        text_search_button = "",        default_language = "DE",        picked_language = "EN";          function main() {    //Check if a document is open    if (!documents.length) return;    var originalUnit = preferences.rulerUnits;    preferences.rulerUnits = Units.PIXELS;    try {                var f = new File('~/Desktop/dealform_languages.xml');        f.open('r');        var xml = new XML( f.read() );        f.close();        translations_xml = xml;        ReadLanguages();        DuplicateLayerSetAndChangeText();    }catch (e) {        $.writeln(e);    }    preferences.rulerUnits = originalUnit;}main();function DuplicateLayerSetAndChangeText(){    var newLayerSet = app.activeDocument.layers.getByName("default").duplicate();    newLayerSet.name = picked_language;    for (var m = newLayerSet.layers.length - 1; m >= 0; m--){         var theLayer = newLayerSet.layers[m];            //change the word copy with the name of the language            theLayer.name = theLayer.name.replace("copy", picked_language);    }            newLayerSet.layers.getByName("text_hotel_search "+picked_language).textItem.contents = text_hotel_search;    newLayerSet.layers.getByName("text_room_type " + picked_language).textItem.contents = text_room_type;    newLayerSet.layers.getByName("text_room "+picked_language).textItem.contents = text_room;    newLayerSet.layers.getByName("text_departure " + picked_language).textItem.contents = text_departure;    newLayerSet.layers.getByName("text_arrival " + picked_language).textItem.contents = text_arrival;    newLayerSet.layers.getByName("text_city "+picked_language).textItem.contents = text_city;    newLayerSet.layers.getByName("text_search_button "+picked_language).textItem.contents = text_search_button;     }function ReadLanguages(){    var len = translations_xml.children().length(),          str  = "";    for(var i = 0; i < len; i++){                   if( str === ""){            str += translations_xml.child(i).localName()         }else{            str += ", " + translations_xml.child(i).localName()         }    }    picked_language = prompt ("Choose one of these languages : "+ str, default_language, "choose language");    text_hotel_search =  translations_xml.child(picked_language).children()[0];    text_arrival =  translations_xml.child(picked_language).children()[1];/*        text_hotel_search = "",        text_room_type = "",        text_room = "",        text_departure = "",        text_arrival = "",        text_city = "",    */}